<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
  name="CierreCajaResumen_Landscape" pageWidth="842" pageHeight="595" orientation="Landscape"
  columnWidth="762" leftMargin="40" rightMargin="40" topMargin="30" bottomMargin="30" uuid="88888888-8888-8888-8888-888888888888">

  <style name="title" fontSize="14" isBold="true" forecolor="#FFFFFF" hTextAlign="Center" vTextAlign="Middle"/>
  <style name="subtitle" fontSize="11" forecolor="#FFFFFF" hTextAlign="Center"/>
  <style name="th" isBold="true" mode="Opaque" backcolor="#EAF9F0" hTextAlign="Center" vTextAlign="Middle"/>
  <style name="tdLeft"  hTextAlign="Left"/>
  <style name="tdRight" hTextAlign="Right"/>
  <style name="tdCenter" hTextAlign="Center"/>

  <parameter name="P_TITULO" class="java.lang.String"/>
  <parameter name="P_FECHA"  class="java.lang.String"/>
  <parameter name="P_CAJERO" class="java.lang.String"/>

  <field name="id" class="java.lang.Object"/>
  <field name="estado" class="java.lang.Object"/>
  <field name="fechaApertura" class="java.lang.Object"/>
  <field name="fechaCierre" class="java.lang.Object"/>
  <field name="usuario" class="java.lang.Object"/>
  <field name="usuarioLogin" class="java.lang.Object"/>
  <field name="efectivoSistema" class="java.lang.Object"/>
  <field name="tarjetaSistema" class="java.lang.Object"/>
  <field name="difEfectivo" class="java.lang.Object"/>
  <field name="difTarjeta" class="java.lang.Object"/>

  <variable name="V_SUMA_EFECTIVO" class="java.math.BigDecimal" calculation="Sum">
    <variableExpression><![CDATA[
      ($F{efectivoSistema}==null) ? java.math.BigDecimal.ZERO
      : new java.math.BigDecimal(((Number)$F{efectivoSistema}).toString())
    ]]></variableExpression>
  </variable>
  <variable name="V_SUMA_TARJETA" class="java.math.BigDecimal" calculation="Sum">
    <variableExpression><![CDATA[
      ($F{tarjetaSistema}==null) ? java.math.BigDecimal.ZERO
      : new java.math.BigDecimal(((Number)$F{tarjetaSistema}).toString())
    ]]></variableExpression>
  </variable>
  <variable name="V_SUMA_DIF_EFE" class="java.math.BigDecimal" calculation="Sum">
    <variableExpression><![CDATA[
      ($F{difEfectivo}==null) ? java.math.BigDecimal.ZERO
      : new java.math.BigDecimal(((Number)$F{difEfectivo}).toString())
    ]]></variableExpression>
  </variable>
  <variable name="V_SUMA_DIF_TAR" class="java.math.BigDecimal" calculation="Sum">
    <variableExpression><![CDATA[
      ($F{difTarjeta}==null) ? java.math.BigDecimal.ZERO
      : new java.math.BigDecimal(((Number)$F{difTarjeta}).toString())
    ]]></variableExpression>
  </variable>
  <variable name="V_SUMA_TOTAL_SIS" class="java.math.BigDecimal">
    <variableExpression><![CDATA[$V{V_SUMA_EFECTIVO}.add($V{V_SUMA_TARJETA})]]></variableExpression>
  </variable>

  <title>
    <band height="54">
      <rectangle><reportElement x="0" y="0" width="762" height="54" mode="Opaque" backcolor="#22C55E"/></rectangle>
      <textField><reportElement style="title" x="0" y="6" width="762" height="18"/><textFieldExpression><![CDATA[$P{P_TITULO}]]></textFieldExpression></textField>
      <textField><reportElement style="subtitle" x="0" y="30" width="762" height="18"/><textFieldExpression><![CDATA["Fecha: " + $P{P_FECHA} + "   Cajero: " + $P{P_CAJERO}]]></textFieldExpression></textField>
    </band>
  </title>

  <columnHeader>
    <band height="22">
      <staticText><reportElement style="th" x="0"   y="0" width="50"  height="22"/><text><![CDATA[ID]]></text></staticText>
      <staticText><reportElement style="th" x="52"  y="0" width="50"  height="22"/><text><![CDATA[Est]]></text></staticText>
      <staticText><reportElement style="th" x="104" y="0" width="210" height="22"/><text><![CDATA[Apertura]]></text></staticText>
      <staticText><reportElement style="th" x="316" y="0" width="210" height="22"/><text><![CDATA[Cierre]]></text></staticText>
      <staticText><reportElement style="th" x="528" y="0" width="90"  height="22"/><text><![CDATA[Efectivo]]></text></staticText>
      <staticText><reportElement style="th" x="620" y="0" width="90"  height="22"/><text><![CDATA[Tarjeta]]></text></staticText>
      <staticText><reportElement style="th" x="712" y="0" width="50"  height="22"/><text><![CDATA[Usr]]></text></staticText>
    </band>
  </columnHeader>

  <detail>
    <band height="18">
      <textField><reportElement style="tdCenter" x="0"   y="0" width="50"  height="18"/><textFieldExpression><![CDATA[$F{id}]]></textFieldExpression></textField>
      <textField><reportElement style="tdCenter" x="52"  y="0" width="50"  height="18"/><textFieldExpression><![CDATA[$F{estado}]]></textFieldExpression></textField>
      <textField isStretchWithOverflow="true"><reportElement style="tdLeft" x="104" y="0" width="210" height="18"/><textFieldExpression><![CDATA[String.valueOf($F{fechaApertura}).replace('T',' ')]]></textFieldExpression></textField>
      <textField isStretchWithOverflow="true"><reportElement style="tdLeft" x="316" y="0" width="210" height="18"/><textFieldExpression><![CDATA[String.valueOf($F{fechaCierre}).replace('T',' ')]]></textFieldExpression></textField>
      <textField pattern="#,##0.00"><reportElement style="tdRight" x="528" y="0" width="90"  height="18"/><textFieldExpression><![CDATA[$F{efectivoSistema}]]></textFieldExpression></textField>
      <textField pattern="#,##0.00"><reportElement style="tdRight" x="620" y="0" width="90"  height="18"/><textFieldExpression><![CDATA[$F{tarjetaSistema}]]></textFieldExpression></textField>
      <textField isStretchWithOverflow="true"><reportElement style="tdLeft" x="712" y="0" width="50" height="18"/><textFieldExpression><![CDATA[String.valueOf($F{usuarioLogin})]]></textFieldExpression></textField>
    </band>
  </detail>

  <summary>
    <band height="44">
      <rectangle><reportElement x="0" y="0" width="762" height="44" mode="Opaque" backcolor="#ECFDF3"/></rectangle>
      <staticText><reportElement x="470" y="7" width="120" height="16"/><textElement textAlignment="Right"/><text><![CDATA[Tot. Efectivo:]]></text></staticText>
      <textField pattern="#,##0.00"><reportElement style="tdRight" x="592" y="7" width="80" height="16"/><textFieldExpression><![CDATA[$V{V_SUMA_EFECTIVO}]]></textFieldExpression></textField>
      <staticText><reportElement x="470" y="25" width="120" height="16"/><textElement textAlignment="Right"/><text><![CDATA[Tot. Tarjeta:]]></text></staticText>
      <textField pattern="#,##0.00"><reportElement style="tdRight" x="592" y="25" width="80" height="16"/><textFieldExpression><![CDATA[$V{V_SUMA_TARJETA}]]></textFieldExpression></textField>

      <staticText><reportElement x="0" y="7" width="150" height="16"/><textElement textAlignment="Left"/><text><![CDATA[Total sistema:]]></text></staticText>
      <textField pattern="#,##0.00"><reportElement style="tdRight" x="150" y="7" width="100" height="16"/><textFieldExpression><![CDATA[$V{V_SUMA_TOTAL_SIS}]]></textFieldExpression></textField>
      <staticText><reportElement x="0" y="25" width="150" height="16"/><textElement textAlignment="Left"/><text><![CDATA[Î” Diferencias:]]></text></staticText>
      <textField pattern="#,##0.00"><reportElement style="tdRight" x="150" y="25" width="100" height="16"/><textFieldExpression><![CDATA[$V{V_SUMA_DIF_EFE}.add($V{V_SUMA_DIF_TAR})]]></textFieldExpression></textField>
    </band>
  </summary>
</jasperReport>