<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
  name="Facturas" pageWidth="595" pageHeight="842" columnWidth="515"
  leftMargin="40" rightMargin="40" topMargin="40" bottomMargin="40" uuid="11111111-1111-1111-1111-111111111111">

  <!-- Estilos -->
  <style name="title" fontSize="14" isBold="true" forecolor="#FFFFFF" hTextAlign="Center" vTextAlign="Middle"/>
  <style name="subtitle" fontSize="11" forecolor="#FFFFFF" hTextAlign="Center"/>
  <style name="th" isBold="true" mode="Opaque" backcolor="#E9F0FF" hTextAlign="Center" vTextAlign="Middle"/>
  <style name="tdLeft"  hTextAlign="Left"/>
  <style name="tdRight" hTextAlign="Right"/>
  <style name="tdCenter" hTextAlign="Center"/>

  <parameter name="P_TITULO" class="java.lang.String"/>
  <parameter name="P_RANGO"  class="java.lang.String"/>

  <field name="id"               class="java.lang.Object"/>
  <field name="fecha"            class="java.lang.Object"/>
  <field name="estado"           class="java.lang.Object"/>
  <field name="subtotal"         class="java.lang.Object"/>
  <field name="impuestoVenta"    class="java.lang.Object"/>
  <field name="impuestoServicio" class="java.lang.Object"/>
  <field name="descuento"        class="java.lang.Object"/>
  <field name="total"            class="java.lang.Object"/>
  <field name="usuario"          class="java.lang.Object"/>
  <field name="cliente"          class="java.lang.Object"/>
  <field name="ordenId"          class="java.lang.Object"/>

  <variable name="V_SUM_TOTAL" class="java.math.BigDecimal" calculation="Sum">
    <variableExpression><![CDATA[
      ($F{total}==null)
        ? java.math.BigDecimal.ZERO
        : new java.math.BigDecimal(((Number)$F{total}).toString())
    ]]></variableExpression>
  </variable>
  <variable name="V_COUNT" class="java.lang.Integer" calculation="Count">
    <variableExpression><![CDATA[$F{id}]]></variableExpression>
  </variable>

  <title>
    <band height="60">
      <rectangle>
        <reportElement x="0" y="0" width="515" height="60" mode="Opaque" backcolor="#275BF5"/>
      </rectangle>
      <textField>
        <reportElement style="title" x="0" y="6" width="515" height="22"/>
        <textFieldExpression><![CDATA[$P{P_TITULO}]]></textFieldExpression>
      </textField>
      <textField>
        <reportElement style="subtitle" x="0" y="32" width="515" height="18"/>
        <textFieldExpression><![CDATA[$P{P_RANGO}]]></textFieldExpression>
      </textField>
    </band>
  </title>

  <columnHeader>
    <band height="22">
      <staticText><reportElement style="th" x="0"   y="0" width="40"  height="22"/><text><![CDATA[ID]]></text></staticText>
      <staticText><reportElement style="th" x="42"  y="0" width="95"  height="22"/><text><![CDATA[Fecha]]></text></staticText>
      <staticText><reportElement style="th" x="139" y="0" width="35"  height="22"/><text><![CDATA[Est]]></text></staticText>
      <staticText><reportElement style="th" x="176" y="0" width="55"  height="22"/><text><![CDATA[Sub]]></text></staticText>
      <staticText><reportElement style="th" x="233" y="0" width="55"  height="22"/><text><![CDATA[IV]]></text></staticText>
      <staticText><reportElement style="th" x="290" y="0" width="55"  height="22"/><text><![CDATA[Serv]]></text></staticText>
      <staticText><reportElement style="th" x="347" y="0" width="55"  height="22"/><text><![CDATA[Desc]]></text></staticText>
      <staticText><reportElement style="th" x="404" y="0" width="70"  height="22"/><text><![CDATA[Total]]></text></staticText>
      <staticText><reportElement style="th" x="476" y="0" width="39"  height="22"/><text><![CDATA[Usr]]></text></staticText>
    </band>
  </columnHeader>

  <detail>
    <band height="18">
      <textField>
        <reportElement style="tdCenter" x="0" y="0" width="40" height="18"/>
        <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
      </textField>

      <textField isStretchWithOverflow="true">
        <reportElement style="tdLeft" x="42" y="0" width="95" height="18"/>
        <textFieldExpression><![CDATA[String.valueOf($F{fecha}).replace('T',' ')]]></textFieldExpression>
      </textField>

      <textField>
        <reportElement style="tdCenter" x="139" y="0" width="35" height="18"/>
        <textFieldExpression><![CDATA[$F{estado}]]></textFieldExpression>
      </textField>

      <textField pattern="#,##0.00">
        <reportElement style="tdRight" x="176" y="0" width="55" height="18"/>
        <textFieldExpression><![CDATA[$F{subtotal}]]></textFieldExpression>
      </textField>
      <textField pattern="#,##0.00">
        <reportElement style="tdRight" x="233" y="0" width="55" height="18"/>
        <textFieldExpression><![CDATA[$F{impuestoVenta}]]></textFieldExpression>
      </textField>
      <textField pattern="#,##0.00">
        <reportElement style="tdRight" x="290" y="0" width="55" height="18"/>
        <textFieldExpression><![CDATA[$F{impuestoServicio}]]></textFieldExpression>
      </textField>
      <textField pattern="#,##0.00">
        <reportElement style="tdRight" x="347" y="0" width="55" height="18"/>
        <textFieldExpression><![CDATA[$F{descuento}]]></textFieldExpression>
      </textField>
      <textField pattern="#,##0.00">
        <reportElement style="tdRight" x="404" y="0" width="70" height="18"/>
        <textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
      </textField>

      <textField isStretchWithOverflow="true">
        <reportElement style="tdLeft" x="476" y="0" width="39" height="18"/>
        <textFieldExpression><![CDATA[String.valueOf($F{usuario})]]></textFieldExpression>
      </textField>
    </band>
  </detail>

  <summary>
    <band height="28">
      <rectangle><reportElement x="0" y="0" width="515" height="28" mode="Opaque" backcolor="#F3F6FF"/></rectangle>

      <staticText><reportElement x="260" y="5" width="140" height="18"/><textElement textAlignment="Right"/><text><![CDATA[Total general (â‚¡):]]></text></staticText>
      <textField pattern="#,##0.00">
        <reportElement style="tdRight" x="404" y="5" width="70" height="18"/>
        <textFieldExpression><![CDATA[$V{V_SUM_TOTAL}]]></textFieldExpression>
      </textField>

      <staticText><reportElement x="0" y="5" width="120" height="18"/><textElement textAlignment="Left"/><text><![CDATA[Registros:]]></text></staticText>
      <textField>
        <reportElement style="tdLeft" x="120" y="5" width="40" height="18"/>
        <textFieldExpression><![CDATA[$V{V_COUNT}]]></textFieldExpression>
      </textField>
    </band>
  </summary>
</jasperReport>